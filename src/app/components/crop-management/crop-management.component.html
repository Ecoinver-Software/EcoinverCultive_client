<div class="min-h-screen" [ngClass]="darkMode ? 'dark bg-gray-900 text-white' : 'bg-white text-gray-800'">
    <div class="container mx-auto p-4">
      <h1 class="text-2xl font-bold mb-6" [ngClass]="darkMode ? 'text-white' : 'text-gray-800'">Gestión de Superficie de Cultivos</h1>
      
      <!-- Filtro de tipo de cultivo -->
      <div class="mb-6">
        <select 
          id="cropTypeFilter" 
          [(ngModel)]="selectedCropTypeId" 
          (change)="onCropTypeChange()"
          class="block w-full p-2.5 rounded-lg border"
          [ngClass]="darkMode ? 'bg-gray-800 border-gray-700 text-white' : 'bg-gray-50 border-gray-300 text-gray-900'"
        >
          <option *ngFor="let cropType of cropTypes" [value]="cropType.id">{{ cropType.name }}</option>
        </select>
      </div>
      
      <!-- Tarjeta de información del cultivo seleccionado -->
      <div *ngIf="filteredCropData && selectedCropType" 
           class="rounded-lg shadow-md p-6 mb-6"
           [ngClass]="darkMode ? 'bg-gray-800' : 'bg-white'">
        <div class="flex items-center mb-4">
          <div [class]="'w-6 h-6 rounded-full mr-3 ' + selectedCropType.bgColor"></div>
          <h2 class="text-xl font-semibold" [ngClass]="darkMode ? 'text-white' : 'text-gray-800'">{{ selectedCropType.name }}</h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div class="p-4 rounded-lg" [ngClass]="darkMode ? 'bg-gray-700' : 'bg-gray-50'">
            <p class="text-sm" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-500'">Superficie ocupada</p>
            <p class="text-2xl font-bold">{{ filteredCropData.occupiedArea }} m<sup>2</sup></p>
          </div>
          
          <div class="p-4 rounded-lg" [ngClass]="darkMode ? 'bg-gray-700' : 'bg-gray-50'">
            <p class="text-sm" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-500'">Superficie requerida</p>
            <p class="text-2xl font-bold">{{ filteredCropData.requiredArea }} m<sup>2</sup></p>
          </div>
        </div>
        
        <div class="mb-4">
          <p class="text-sm mb-1" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-500'">Estado de requerimiento</p>
          <p [class]="'text-lg font-semibold ' + getRequirementStatusClass()">
            {{ getRequirementStatus() }}
          </p>
        </div>
        
        <!-- Barra de progreso -->
        <div class="mb-2">
          <p class="text-sm mb-1" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-500'">Ocupación vs Requerimiento</p>
          <div class="w-full rounded-full h-4" [ngClass]="darkMode ? 'bg-gray-700' : 'bg-gray-200'">
            <div 
              class="h-4 rounded-full bg-blue-600" 
              [style.width.%]="getOccupationPercentage()"
            ></div>
          </div>
          <p class="text-xs text-right mt-1">{{ getOccupationPercentage() }}%</p>
        </div>
      </div>
      
      <!-- Representación visual de la superficie -->
      <div class="mb-6">
        <h3 class="text-lg font-semibold mb-3" [ngClass]="darkMode ? 'text-white' : 'text-gray-800'">Representación de superficie</h3>
        <div class="w-full h-16 flex rounded-lg overflow-hidden">
          <div 
            *ngFor="let segment of surfaceSegments" 
            [class]="segment.color + ' h-full'"
            [style.width]="segment.width"
          ></div>
        </div>
        
        <!-- Leyenda -->
        <div class="flex flex-wrap gap-4 mt-3">
          <div *ngIf="selectedCropType" class="flex items-center">
            <div [class]="'w-4 h-4 rounded-sm mr-2 ' + selectedCropType.bgColor"></div>
            <span class="text-sm" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-600'">Superficie ocupada</span>
          </div>
          <div class="flex items-center">
            <div class="w-4 h-4 rounded-sm mr-2" [ngClass]="darkMode ? 'bg-gray-600' : 'bg-gray-300'"></div>
            <span class="text-sm" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-600'">Superficie requerida adicional</span>
          </div>
          <div class="flex items-center">
            <div class="w-4 h-4 rounded-sm mr-2" [ngClass]="darkMode ? 'bg-gray-500' : 'bg-gray-100'"></div>
            <span class="text-sm" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-600'">Superficie disponible</span>
          </div>
        </div>
      </div>
      
      <!-- Tabla de todos los cultivos -->
      <div>
        <h3 class="text-lg font-semibold mb-3" [ngClass]="darkMode ? 'text-white' : 'text-gray-800'">Resumen de todos los cultivos</h3>
        <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
          <table class="w-full text-sm text-left" [ngClass]="darkMode ? 'text-gray-300' : 'text-gray-500'">
            <thead class="text-xs uppercase" [ngClass]="darkMode ? 'bg-gray-700 text-gray-300' : 'bg-gray-50 text-gray-700'">
              <tr>
                <th scope="col" class="px-6 py-3">Cultivo</th>
                <th scope="col" class="px-6 py-3">Ocupado (m²)</th>
                <th scope="col" class="px-6 py-3">Requerido (m²)</th>
                <th scope="col" class="px-6 py-3">Estado</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let data of cropData" 
                  [ngClass]="darkMode ? 'bg-gray-800 border-gray-700 hover:bg-gray-700' : 'bg-white border-b hover:bg-gray-50'">
                <td class="px-6 py-4 flex items-center">
                  <div [class]="'w-3 h-3 rounded-full mr-2 ' + getCropTypeColor(data.cropTypeId)"></div>
                  {{ getCropTypeName(data.cropTypeId) }}
                </td>
                <td class="px-6 py-4">{{ data.occupiedArea }}</td>
                <td class="px-6 py-4">{{ data.requiredArea }}</td>
                <td class="px-6 py-4" 
                    [ngClass]="{'text-green-500': isRequirementMet(data), 'text-red-500': !isRequirementMet(data)}">
                  {{ getStatusText(data) }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  